<!DOCTYPE html>
<html>
  <body>
    <h1>Get hands on with JavaScript's Fetch API</h1>
    <p>
      Write your requests in the script and watch the console and network logs.
    </p>

    <script>
      // GET retrieve all to-do's
      fetch('https://jsonplaceholder.typicode.com/todos');

      // will return all resources
      fetch('https://jsonplaceholder.typicode.com/todos', {
        method: "GET"
      })
      .then (response => response.json())
      .then(data => {
        console.log(data);
      })
      // GET retrieves the to-do with specific URI (in this case id = 5)
      fetch('https://jsonplaceholder.typicode.com/todos/5')
      .then (todos => todos.json())
      .then(todo => {
        console.log(todo);
      })
      /* will return this specific resource:
        {
            "userId": 1,
            "id": 5,
            "title": "laboriosam mollitia et enim quasi adipisci quia provident illum",
            "completed": false
        }
        */

      // POST adds a random id to the object sent
      fetch('https://jsonplaceholder.typicode.com/todos/', {
        method: "POST",
        body: JSON.stringify({
          "userId": 1,
            "title": "clean room",
            "completed": false,
            "id": 201,
        }),
        headers: {
            "Content-Type": "application/json"
          }
      })
      .then (response => response.json())
      .then(data => {
        console.log(data);
      })
      /* will return
        {
            "userId": 1,
            "title": "clean room",
            "completed": false,
            "id": 201
        }
        */

      // PUT to the resource with id = 5 to change the name of task
        fetch('https://jsonplaceholder.typicode.com/todos/5', {
          method: "PUT",
          body: JSON.stringify({
            "userId": 1,
            "id": 5,
            "title": "hello task",
            "completed": false
          }),
          headers: {
            "Content-Type": "application/json"
          } 
        })
        .then(response => response.json())
        .then(data => {
          console.log(data);
        })
      /* will return
        {
            "userId": 1,
            "id": 5,
            "title": "hello task",
            "completed": false
        }
        */

      // PATCH to the resource id = 1
      // update that task is completed
      fetch('https://jsonplaceholder.typicode.com/todos/1', {
          method: "PATCH",
          body: JSON.stringify({
            "userId": 1,
            "id": 1,
            "title": "delectus aut autem",
            "completed": true
          }),
          headers: {
            "Content-Type": "application/json"
          } 
        })
        .then(response => response.json())
        .then(data => {
          console.log(data);
        })
      /* will return
        {
            "userId": 1,
            "id": 1,
            "title": "delectus aut autem",
            "completed": true
        }
        */

      // DELETE task with id = 1
      fetch('https://jsonplaceholder.typicode.com/todos/1', {
        method: "DELETE"
      })
      .then (response => response.json())
      .then(data => {
        console.log(data);
      })
      
      fetch('https://jsonplaceholder.typicode.com/todos/1', {
        method: "GET"
      })
      .then (response => response.json())
      .then(data => {
        console.log(data);
      })
      // empty response: {}
    </script>
  </body>
</html>
